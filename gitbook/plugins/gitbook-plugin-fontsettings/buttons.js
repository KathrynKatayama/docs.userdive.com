require(["gitbook","lodash","jQuery"],function(t,e,a){function i(){t.storage.set("fontState",r),f()}function s(t){t.preventDefault(),r.size>=4||(r.size++,i())}function n(t){t.preventDefault(),r.size<=0||(r.size--,i())}function o(t,e){e.preventDefault(),r.family=t,i()}function l(t,e){e.preventDefault();var s=a(".book");0!==r.theme&&s.removeClass("color-theme-"+r.theme),r.theme=t,0!==r.theme&&s.addClass("color-theme-"+r.theme),i()}function f(){var e=t.state.$book;a(".font-settings .font-family-list li").removeClass("active"),a(".font-settings .font-family-list li:nth-child("+(r.family+1)+")").addClass("active"),e[0].className=e[0].className.replace(/\bfont-\S+/g,""),e.addClass("font-size-"+r.size),e.addClass("font-family-"+r.family),0!==r.theme&&(e[0].className=e[0].className.replace(/\bcolor-theme-\S+/g,""),e.addClass("color-theme-"+r.theme))}function c(e){var a,i;i=t.state.$book,a=i.find(".book-body"),r=t.storage.get("fontState",{size:e.size||2,family:h[e.family||"sans"],theme:m[e.theme||"white"]}),f()}var r,m={white:0,sepia:1,night:2},h={serif:0,sans:1};t.events.bind("start",function(a,i){var f=i.fontsettings;t.toolbar.createButton({icon:"fa fa-font",label:"Font Settings",className:"font-settings",dropdown:[[{text:"A",className:"font-reduce",onClick:n},{text:"A",className:"font-enlarge",onClick:s}],[{text:"Serif",onClick:e.partial(o,0)},{text:"Sans",onClick:e.partial(o,1)}],[{text:"White",onClick:e.partial(l,0)},{text:"Sepia",onClick:e.partial(l,1)},{text:"Night",onClick:e.partial(l,2)}]]}),c(f)})});